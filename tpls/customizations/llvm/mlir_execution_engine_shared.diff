diff --git a/mlir/lib/ExecutionEngine/CMakeLists.txt b/mlir/lib/ExecutionEngine/CMakeLists.txt
index ad752cfdcf..94e832ebea 100644
--- a/mlir/lib/ExecutionEngine/CMakeLists.txt
+++ b/mlir/lib/ExecutionEngine/CMakeLists.txt
@@ -92,6 +92,30 @@ add_mlir_library(MLIRExecutionEngine
   MLIRTargetLLVMIRExport
   )

+# Backport from LLVM 19: Shared library for MLIRExecutionEngine that links
+# against libMLIR.dylib/libLLVM.dylib. Avoids symbol conflicts on macOS when
+# mixing static MLIR libs with the dylib (two-level namespace issues).
+# See: https://github.com/llvm/llvm-project/commit/631ae59d
+# TODO: Remove when upgrading to LLVM 19+ which includes MLIRExecutionEngineShared.
+if(LLVM_BUILD_LLVM_DYLIB AND NOT (WIN32 OR MINGW OR CYGWIN))
+  add_mlir_library(MLIRExecutionEngineShared
+    ExecutionEngine.cpp
+    SHARED
+
+    EXCLUDE_FROM_LIBMLIR
+
+    ADDITIONAL_HEADER_DIRS
+    ${MLIR_MAIN_INCLUDE_DIR}/mlir/ExecutionEngine
+
+    DEPENDS
+    MLIRExecutionEngine
+
+    LINK_LIBS PUBLIC
+    LLVM
+    MLIR
+    )
+endif()
+
 get_property(dialect_libs GLOBAL PROPERTY MLIR_DIALECT_LIBS)
 add_mlir_library(MLIRJitRunner
   JitRunner.cpp
