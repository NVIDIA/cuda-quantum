on:
  workflow_call:
    inputs:
      toolchain:
        required: true
        type: string

name: Run CI within the dev environment container

env:
  # ${{ github.repository }} is causing issue because NVIDIA is capitalized
  image_name: nvidia/cuda-quantum-devdeps
  registry: ghcr.io

jobs:
  load_devenv:
    uses: ./.github/workflows/load_devenv.yml
    with:
      toolchain: ${{ inputs.toolchain }}
      cache_name: ${{ env.GITHUB_REF_NAME  }}-cuda-quantum-devdeps-${{ inputs.toolchain }}
      full_image_name: ${{ env.registry }}/${{ env.image_name }}
