// ========================================================================== //
// Copyright (c) 2022 - 2024 NVIDIA Corporation & Affiliates.                 //
// All rights reserved.                                                       //
//                                                                            //
// This source code and the accompanying materials are made available under   //
// the terms of the Apache License 2.0 which accompanies this distribution.   //
// ========================================================================== //

// RUN: cudaq-opt --argument-synthesis=functions=foo:%S/arg_subst.txt,blink:%S/arg_subst.txt --canonicalize %s | FileCheck %s

func.func private @bar(i32)
func.func private @baz(f32)

func.func @foo(%arg0: i32, %arg1: f32) {
  call @bar(%arg0) : (i32) -> ()
  call @baz(%arg1) : (f32) -> ()
  return
}

// CHECK-LABEL:   func.func @foo() {
// CHECK-DAG:       %[[VAL_0:.*]] = arith.constant 42 : i32
// CHECK-DAG:       %[[VAL_1:.*]] = arith.constant 3.100000e+00 : f32
// CHECK:           call @bar(%[[VAL_0]]) : (i32) -> ()
// CHECK:           call @baz(%[[VAL_1]]) : (f32) -> ()
// CHECK:           return
// CHECK:         }

func.func @blink(%arg0: i32, %arg1: i32) {
  call @bar(%arg0) : (i32) -> ()
  call @bar(%arg1) : (i32) -> ()
  return
}

// CHECK-LABEL:   func.func @blink(
// CHECK-SAME:        %[[VAL_0:.*]]: i32) {
// CHECK:           %[[VAL_1:.*]] = arith.constant 42 : i32
// CHECK:           call @bar(%[[VAL_1]]) : (i32) -> ()
// CHECK:           call @bar(%[[VAL_0]]) : (i32) -> ()
// CHECK:           return
// CHECK:         }
